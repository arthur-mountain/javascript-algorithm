---
title: "1523. Count Odd Numbers in an Interval Range"
tags:
  - Math
difficulty: "Easy"
date_solved: "2025-12-07"
link: "https://leetcode.com/problems/count-odd-numbers-in-an-interval-range/description/"
---

## 問題描述

給予兩個正數數字 low and high，回傳 low ~ high 之間的奇數數量(包含 low and high)

區間表示法: \[low, hight\] ，包含 low and high

## Constraints

- 0 <= low <= high&nbsp;<= 10\*\*9

## 解題思路

### 初步分析(觀察與發想)

- 計數、奇偶特性，可能會有數學解。公式目前沒頭緒，先寫暴力解

- 暴力解直接迴圈從 low ~ high，用 bitwise 判斷奇偶，進行計數

## 解法總覽

### Solution1(暴力解)

- **思路說明**：

  建立 count 紀錄奇數數量，迴圈遍歷(\[low, high\])，透過 bitwise 判斷奇偶數，

  當 (i & 0) \=\=\= 0 時是偶數，(i & 1) \=\=\= 1 時是奇數，

  因為我們要計數奇數的數量，所以可以直接 count += (i & 0)，

  最後回傳 count

- **複雜度分析**：

  - 時間複雜度：O(n)

  - 空間複雜度：O(1)

  - 通過狀態：✅ AC

- **其他備註\(優化方向、特殊限制、問題延伸討論\)**：

  - 數學解，降低時間複雜度至 O(1)

- **測試案例**：

  - 案例 A: low、high 都是奇數

    Input: low=1, high=5

    Ouput: 3

    Expected: 3

    Explain: 1, 3, 5 是奇數

  ***

  - 案例 B: low、high 都是偶數

    Input: low=2, high=6

    Ouput: 2

    Expected: 2

    Explain: 3, 5 是奇數

  ***

  - 案例 C: low 是奇數，high 是偶數

    Input: low=1, high=6

    Ouput: 3

    Expected: 3

    Explain: 1, 3, 5 是奇數

  ***

  - 案例 D: low 是偶數，high 是奇數

    Input: low=2, high=5

    Ouput: 2

    Expected: 2

    Explain: 3, 5 是奇數

  ***

  - 案例 E: low 等於0, high不等於0

    Input: low=0, high=3

    Ouput: 2

    Expected: 2

    Explain: 1, 3 是奇數

  ***

  - 案例 F: low, high 都等於0

    Input: low=0, high=0

    Ouput: 0

    Expected: 0

    Explain: 沒有奇數

### Solution2(Math)

- **思路說明**：

  核心洞察：奇數和偶數交替出現（1, 2, 3, 4, 5...）

  因為從 1 ~ n 奇偶會交替出現，所以

  1. 當 n 為奇數時(因為開頭和結尾都是奇數，奇數會比偶數多一個)

     - 代數公式：

       - 若 n = 奇數個數 + 偶數個數

       - 而奇數個數 = 偶數個數 + 1 （奇數會比偶數多一個）

     - 推導：

       - n = 奇數個數 + 偶數個數
       - n = 奇數個數 + (奇數個數 - 1) ← 把"偶數個數"進行代數替換
       - n = 2 × 奇數個數 - 1
       - n + 1 = 2 × 奇數個數

     - 結論：
       - 奇數個數 = (n + 1) / 2
       - 當 n=5: 奇數個數 = (5+1)/2 = 3

  ***

  2. 當 n 為偶數時(因為開頭是奇數，結尾是偶數，剛好配對)

     - 代數公式：

       - 若 n = 奇數個數 + 偶數個數
       - 而奇數個數 = 偶數個數

     - 推導：

       - n = 奇數個數 + 偶數個數
       - n = 奇數個數 + 奇數個數 ← 因為奇偶個數相等，進行代數替換
       - n = 2 × 奇數個數

     - 結論：
       - 奇數個數 = n / 2
       - 當 n=6: 奇數個數 = 6/2 = 3

  ***

  3. 統一公式 (原本要先判斷當前的 n 是奇數或偶數，才能知道要 (n+1)/2 還是 n / 2)

     而當 n 是偶數時，因為(n+1)/2 會產生小數，透過 Math.floor 無條件捨去，剛好變成 n/2，
     這樣不論 n 是奇是偶，都可以透過 Math.floor((n + 1) / 2) 可以統一奇偶計算

     - 當 n=5 (奇數):

       - 原本：(5 + 1) / 2 = 6 / 2 = 3
       - 統一公式：Math.floor((5 + 1) / 2) = Math.floor(6 / 2) = 3

     - 當 n=6 (偶數):

       - 原本：6 / 2 = 3
       - 統一公式： Math.floor((6 + 1) / 2) = Math.floor(7 / 2) = Math.floor(3.5) = 3

  ***

  4. 為什麼 Math.floor(low / 2) 可以代表著 \[1, low - 1\] 的奇數個數？

     - 根據統一公式，1 ~ (low - 1) 會等於:

       = Math.floor((n + 1) / 2) --> n 替換成 low - 1

       = Math.floor((low - 1 + 1) / 2) --> +1, -1 可以抵銷

       = Math.floor(low / 2)

  ***

  根據以上代數推導，結合透過區間進行代數替換 --> \[low, high\] = \[1, high\] - \[1, low-1\]

  推導：

  - \[1, low-1\] 的奇數個數 = Math.floor((low-1+1)/2) = Math.floor(low/2)

  - \[1, high\] 的奇數個數 = Math.floor((high+1)/2)

  - 相減得到 \[low, high\] 的奇數

- **複雜度分析**：

  - 時間複雜度：O(1)

  - 空間複雜度：O(1)

  - 通過狀態：✅ AC

- **測試案例**： 同 Solution1 測試案例

## 學習記錄

- 首次解題(暴力解，迴圈+bitwise)：2025-12-07 | 耗時：不紀錄(重理解思路) | 獨立完成：是

- 首次解題(Math)：2025-12-07 | 耗時：不紀錄(重理解思路) | 獨立完成：否

- 複習1(Math)：2025-12-08 | 耗時：11分鐘 | 獨立完成：是 | 順暢度：卡頓。在推導數學運算時有卡住，但後來有成功自己想出來

- 複習2(Math)：2025-12-11 | 耗時：7分鐘 | 獨立完成：是 | 順暢度：流暢。

  - 推導數學運算時流暢，但都會需要時間推導公式

  - 但在統一公式的推導，有點像是背的，還沒很熟

- 複習3(Math)：2025-12-17 | 耗時：20分鐘 | 獨立完成：是 | 順暢度：算流暢。

  - 推導公式過程算流暢，但中間在代數替換時沒注意到寫反了，導致公式錯誤卡很久，但概念是有得

  - 統一公式的推導，還是沒很熟，目前直覺直接寫 Math.floor

- 複習4(Math)：2026-01-17 | 耗時：15分鐘 | 獨立完成：是 | 順暢度：算流暢。

  - 推導公式過程算流暢，無意識使用另一種自己所理解的公式推導，以區間重複為概念，雖然沒想到統一公式那麼簡潔，但仍可 AC
