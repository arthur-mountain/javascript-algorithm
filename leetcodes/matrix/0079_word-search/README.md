---
title: "79. Word Search"
tags:
  - Array
  - String
  - Backtracking
  - Depth-First Search
  - Matrix
difficulty: "Medium"
date_solved: "2025-11-29"
link: "https://leetcode.com/problems/word-search/description/"
---

## å•é¡Œæè¿°

çµ¦äºˆä¸€å€‹ m x n characters board å’Œä¸€å€‹ word stringï¼Œ

å¦‚æœ word å­˜åœ¨åœ¨ board ä¸­è¿”å› trueï¼Œå¦å‰‡è¿”å› false

## Constraints

- m == board.length
- n = board[i].length
- 1 <= m, n <= 6
- 1 <= word.length <= 15
- board and word consists of only lowercase and uppercase English letters.

## è§£é¡Œæ€è·¯

### åˆæ­¥åˆ†æ(è§€å¯Ÿèˆ‡ç™¼æƒ³)

- å¯ä»¥ä½¿ç”¨ DFSï¼Œèµ·å§‹é»å¯ä»¥é‡åˆ° word\[0\] æ‰é–‹å§‹ DFSï¼Œç•¶ DFS é€£æ¥èµ·ä¾†çš„å­—ä¸²é•·åº¦ç­‰æ–¼ word æ™‚ä½œç‚º base caseã€‚

  åˆæ­¥è¤‡é›œåº¦åˆ†æï¼š

  - æ™‚é–“ O(m \* n \* 4^L)ï¼šæ¯å€‹æ ¼å­éƒ½å¯èƒ½ä½œç‚ºèµ·é»ï¼Œå¾æ¯å€‹èµ·é»å‡ºç™¼æœ€å£æƒ…æ³ä¸‹æ¢ç´¢ 4^L å€‹ç¯€é»ï¼ˆL ç‚º word é•·åº¦ï¼Œæ¯å±¤æœ€å¤š 4 å€‹æ–¹å‘ï¼‰

  - ç©ºé–“ O(L)ï¼šéè¿´æ·±åº¦æœ€å¤šç‚º word é•·åº¦

- é©åˆä½¿ç”¨ **Backtracking**ï¼ˆåŸºæ–¼ DFSï¼‰ï¼š

  - å¾ç¬¦åˆ word\[0\] çš„æ ¼å­é–‹å§‹å˜—è©¦

  - éè¿´æœå°‹å››å€‹æ–¹å‘ï¼ŒåŒ¹é…ä¸‹ä¸€å€‹å­—å…ƒ

  - è‹¥ç•¶å‰è·¯å¾‘å¤±æ•—ï¼Œæ’¤éŠ·é¸æ“‡ï¼ˆå›æº¯å–æ¶ˆæ¨™è¨˜ï¼‰å¾Œå˜—è©¦å…¶ä»–æ–¹å‘

  - ç•¶åŒ¹é…å®Œæ•´å€‹ word æ™‚è¿”å› true

## è§£æ³•ç¸½è¦½

### Solution1 - DFS+backtracking

- **æ€è·¯èªªæ˜**ï¼š

  éæ­· boardï¼Œè‹¥ç•¶å‰æ ¼å­ç¬¦åˆç¬¬ä¸€å€‹ character å‰‡å˜—è©¦é–‹å§‹ DFSã€‚

  **DFS æµç¨‹ï¼ˆä»¥å¯«æ³•ä¸‰ç‚ºä¾‹ï¼‰ï¼š**

  1. é€²å…¥å‡½æ•¸å¾Œï¼Œå…ˆæª¢æŸ¥ç•¶å‰ä½ç½®æ˜¯å¦å·²è¨ªå•éï¼ˆé€é `used` Set è¨˜éŒ„ï¼‰
  2. æª¢æŸ¥ç•¶å‰ä½ç½®çš„å­—å…ƒæ˜¯å¦ç­‰æ–¼ `word[wordIndex]`
  3. è‹¥ `wordIndex === word.length - 1`ï¼Œä»£è¡¨å·²åŒ¹é…å®Œæ•´å€‹ wordï¼Œè¿”å› true
  4. æ¨™è¨˜ç•¶å‰ä½ç½®ç‚ºå·²è¨ªå•ï¼ˆ`used.add(key)`ï¼‰
  5. å‘å››å€‹æ–¹å‘ï¼ˆä¸Šã€å³ã€ä¸‹ã€å·¦ï¼‰éè¿´æœå°‹ä¸‹ä¸€å€‹å­—å…ƒ
  6. è‹¥ä»»ä¸€æ–¹å‘æ‰¾åˆ°å®Œæ•´è·¯å¾‘å‰‡è¿”å› true
  7. è‹¥å››å€‹æ–¹å‘éƒ½å¤±æ•—ï¼Œç§»é™¤ç•¶å‰ä½ç½®æ¨™è¨˜ï¼ˆbacktrackingï¼‰ï¼Œè¿”å› false

  **é—œéµè¨­è¨ˆï¼š**

  - ä½¿ç”¨ `row * COL + col` ä½œç‚ºä½ç½®çš„å”¯ä¸€ key ä¾†æ¨™è¨˜è¨ªå•ç‹€æ…‹
  - é€éå‚³é `wordIndex` é¿å…éœ€è¦ç´¯ç©å­—ä¸²ï¼Œç¯€çœç©ºé–“
  - åœ¨å‡½æ•¸é–‹é ­é›†ä¸­æ‰€æœ‰æª¢æŸ¥æ¢ä»¶ï¼ˆguard clausesï¼‰ï¼Œé‚è¼¯æ¸…æ™°

- **è¤‡é›œåº¦åˆ†æ**ï¼š

  - æ™‚é–“è¤‡é›œåº¦ï¼šO(m \* n \* 4^L)ï¼Œå…¶ä¸­ L æ˜¯ word é•·åº¦

    - æœ€å£æƒ…æ³ä¸‹ï¼Œæ¯å€‹èµ·é»éƒ½è¦å˜—è©¦ï¼Œæ¯æ¬¡æœå°‹æœ€å¤šæ“´å±• 4^L å€‹ç¯€é»

  - ç©ºé–“è¤‡é›œåº¦ï¼šO(L)

    - éè¿´æ·±åº¦æœ€å¤šç‚º Lï¼ˆword é•·åº¦ï¼‰

    - `used` Set åœ¨å–®æ¬¡ DFS ä¸­æœ€å¤šå­˜ L å€‹ä½ç½®

  - é€šéç‹€æ…‹ï¼šâœ… AC

- **å…¶ä»–å‚™è¨»(å„ªåŒ–æ–¹å‘ã€ç‰¹æ®Šé™åˆ¶ã€å•é¡Œå»¶ä¼¸è¨è«–)**ï¼š

  - **ä¸‰ç¨®å¯¦ä½œå¯«æ³•æ¯”è¼ƒï¼š** ä¸‰ç¨®å¯«æ³•æ™‚é–“ç©ºé–“è¤‡é›œåº¦ç›¸åŒï¼Œå¯¦å‹™ä¸Šæ•ˆèƒ½å·®ç•°å¯å¿½ç•¥ï¼Œé¸æ“‡å¯«æ³•ä¸‰ä¸»è¦è€ƒé‡ç¨‹å¼ç¢¼å¯ç¶­è­·æ€§

    - **å¯«æ³•ä¸€ï¼ˆå¤–å±¤é æª¢æŸ¥ï¼‰**ï¼šæ¯æ¬¡é€²å…¥ DFS å‰å…ˆæª¢æŸ¥ `board[newRow][newCol] === word[newWordIndex]`

      - å„ªé»ï¼šææ—©éæ¿¾ä¸åŒ¹é…çš„ä½ç½®ï¼Œæ¸›å°‘å‡½æ•¸å‘¼å«æ¬¡æ•¸

      - ç¼ºé»ï¼šæª¢æŸ¥é‚è¼¯åˆ†æ•£åœ¨å¤–å±¤å’Œå…§å±¤ï¼Œå¯è®€æ€§ç¨å·®

    - **å¯«æ³•äºŒï¼ˆå…§å±¤é¦–è¡Œæª¢æŸ¥ï¼‰**ï¼šé€²å…¥ DFS å¾Œç«‹å³æª¢æŸ¥ `board[row][col] !== word[wordIndex]`

      - å„ªé»ï¼šæ‰€æœ‰é‚è¼¯çµ±ä¸€åœ¨ DFS å…§éƒ¨ï¼Œæ•´é«”å¯«æ³•ä¸€è‡´
      - ç¼ºé»ï¼šç›¸æ¯”å¯«æ³•ä¸€å¤šäº†ä¸€æ¬¡å‡½æ•¸å‘¼å«é–‹éŠ·

    - **å¯«æ³•ä¸‰ï¼ˆguard clauses æ¨¡å¼ï¼Œç•¶å‰æ¡ç”¨ï¼‰**ï¼šåœ¨å‡½æ•¸é–‹é ­ä¾åºæª¢æŸ¥ `used.has(key)` å’Œå­—å…ƒåŒ¹é…

      - å„ªé»ï¼šæ‰€æœ‰å‰ç½®æ¢ä»¶é›†ä¸­åœ¨é–‹é ­ï¼Œç¬¦åˆ early return æ¨¡å¼ï¼Œæœ€æ˜“è®€

      - ç¼ºé»ï¼šèˆ‡å¯«æ³•äºŒç›¸åŒï¼Œéœ€é€²å…¥å‡½æ•¸æ‰èƒ½æª¢æŸ¥

- **æ¸¬è©¦æ¡ˆä¾‹**ï¼š

  - æ¡ˆä¾‹ A - åŸºæœ¬æˆåŠŸæ¡ˆä¾‹:

    Input:

    ```plaintext
        board = [["A","B","C","E"],
                ["S","F","C","S"],
                ["A","D","E","E"]]
        word = "ABCCED"
    ```

    Output: `true`

    Expected: `true`

    Explain: è·¯å¾‘ç‚º (0,0)â†’(0,1)â†’(0,2)â†’(1,2)â†’(2,2)â†’(2,1)

  ***

- æ¡ˆä¾‹ B - éœ€è¦ backtracking:

  Input:

  ```plaintext
      board = [["A","B","C","E"],
              ["S","F","C","S"],
              ["A","D","E","E"]]
      word = "SEE"
  ```

  Output: `true`

  Expected: `true`

  Explain: è·¯å¾‘ç‚º (1,3)â†’(2,3)â†’(2,2)

  ***

- æ¡ˆä¾‹ C - å¤±æ•—æ¡ˆä¾‹:

  Input:

  ```plaintext
      board = [["A","B","C","E"],
              ["S","F","C","S"],
              ["A","D","E","E"]]
      word = "ABCB"
  ```

  Output: `false`

  Expected: `false`

  Explain: ç„¡æ³•æ‰¾åˆ°è·¯å¾‘ï¼Œå› ç‚º B åªèƒ½ä½¿ç”¨ä¸€æ¬¡

  ***

- æ¡ˆä¾‹ D - å–®ä¸€æ ¼å­:

  Input: `board = [["A"]]`, `word = "A"`

  Output: `true`

  Expected: `true`

  Explain: é‚Šç•Œæ¢ä»¶æ¸¬è©¦

### Solution1 - Iterative backtracking

- **æ€è·¯èªªæ˜**ï¼š

  ä½¿ç”¨ **stack æ¨¡æ“¬éè¿´å‘¼å«å †ç–Š**ï¼Œå®Œå…¨å–ä»£ backtracking éè¿´ï¼Œå®Œå…¨é¿å…éè¿´æ·±åº¦å•é¡Œã€‚

  **Iteration DFS æ ¸å¿ƒæµç¨‹ï¼š**

  1. **èµ·é»æ¨™è¨˜**ï¼šæ‰¾åˆ° `word[0]` åŒ¹é…çš„æ ¼å­ï¼Œç«‹å³æ¨™è¨˜ç‚º `#`
  2. **ç‹€æ…‹åˆå§‹åŒ–**ï¼šstack push `{row, col, wordIndex: 0, directionIndex: 0}`
  3. **ä¸»è¿´åœˆ**ï¼š

     ```plaintext
     ğŸ‘ï¸ PEEK ç•¶å‰ç‹€æ…‹ï¼ˆä¸ popï¼‰
     â”œâ”€â”€ wordIndex === len-1 â†’ return true âœ“
     â”œâ”€â”€ éæ­·æœªè©¦æ–¹å‘ï¼ˆå¾ directionIndex é–‹å§‹ï¼‰ï¼š
     â”‚   â”œâ”€â”€ æ‰¾åˆ°å¯è¡Œè·¯å¾‘ â†’ æ¨™è¨˜ + push æ–°ç‹€æ…‹ + æ›´æ–° directionIndex + break
     â”‚   â””â”€â”€ æ‰€æœ‰æ–¹å‘è©¦å®Œä»ç„¡è·¯ â†’ pop + æ¢å¾©æ¨™è¨˜
     ```

  4. **é˜² TLE**ï¼š`directionIndex` è¨˜éŒ„æ¯å€‹æ ¼å­å·²è©¦çš„æ–¹å‘ï¼Œé¿å…é‡è¤‡éæ­·
  5. **é˜² WA**ï¼šèµ·é»é æ¨™è¨˜ï¼Œé¿å… `["a","a"]` ç„¡é™å¾ªç’°

  **é—œéµè¨­è¨ˆï¼š**

  - `directionIndex`ï¼šæ¯å€‹æ ¼å­åªè©¦ 4 æ¬¡æ–¹å‘ï¼Œç­‰åƒ¹ recursive æ•ˆèƒ½
  - `foundNext`ï¼šåˆ¤æ–·ã€Œç•¶å‰ç¯€é»æ˜¯å¦é‚„æœ‰å­è·¯å¾‘ã€
  - peek + push/popï¼šå®Œç¾æ¨¡æ“¬ DFS éè¿´è¡Œç‚º

- **è¤‡é›œåº¦åˆ†æ**ï¼š

  - æ™‚é–“è¤‡é›œåº¦ï¼š**O(m*n*4^L)**ï¼Œèˆ‡ recursive **å®Œå…¨ç›¸åŒ**

    - `directionIndex` ç¢ºä¿æ¯å€‹æ ¼å­åªè©¦ 4 æ¬¡æ–¹å‘
    - æ¯å€‹èµ·é»æœ€å¤šæ¢ç´¢ 4^L æ¢è·¯å¾‘

  - ç©ºé–“è¤‡é›œåº¦ï¼š**O(L)**

    - stack æ·±åº¦æœ€å¤š Lï¼ˆword é•·åº¦ï¼‰
    - æ¯å€‹å…ƒç´ å­˜ `{row, col, wordIndex, directionIndex}`

  - é€šéç‹€æ…‹ï¼šâœ… **AC**

- **å…¶ä»–å‚™è¨»(å„ªåŒ–æ–¹å‘ã€ç‰¹æ®Šé™åˆ¶ã€å•é¡Œå»¶ä¼¸è¨è«–)**ï¼š

  **èˆ‡ Recursive å°æ¯”ï¼š**

  ```javascript
  // Recursive: å‘¼å«å †ç–Šè‡ªå‹•ç®¡ç†
  backtracking(row, col, wordIndex);

  // Iterative: æ‰‹å‹•ç®¡ç†å †ç–Š
  stack.push({ row, col, wordIndex, directionIndex });
  // peek â†’ è©¦æ–¹å‘ â†’ push / pop
  ```

## å­¸ç¿’è¨˜éŒ„

- é¦–æ¬¡è§£é¡Œ(DFS+Backtracking)ï¼š2025-11-29 | è€—æ™‚ï¼šä¸ç´€éŒ„(é‡ç†è§£æ€è·¯) | ç¨ç«‹å®Œæˆï¼šå¦

- é¦–æ¬¡è§£é¡Œ(Iterative Backtracking)ï¼š2026-01-10 | è€—æ™‚ï¼šä¸ç´€éŒ„(é‡ç†è§£æ€è·¯) | ç¨ç«‹å®Œæˆï¼šå¦

- è¤‡ç¿’1(DFS+Backtracking)ï¼š2025-11-29 | è€—æ™‚ï¼š20åˆ†é˜ | ç¨ç«‹å®Œæˆï¼šå¦ | é †æš¢åº¦ï¼šæµæš¢ã€‚

  - æ•´é«”æµæš¢ï¼Œä¸­é–“å› ç‚ºä¸€å€‹ typo æ²’æ³¨æ„åˆ°ï¼Œæ‰€ä»¥æœ‰ç ”ç©¶ç­”æ¡ˆï¼Œä½†æ•´é«”é‚è¼¯éƒ½æœ‰å¯«å‡ºä¾†

- è¤‡ç¿’2(DFS,Backtracking)ï¼š2025-12-03 | è€—æ™‚ï¼š10åˆ†é˜ | ç¨ç«‹å®Œæˆï¼šæ˜¯ | é †æš¢åº¦ï¼šæµæš¢ã€‚

  - æ•´é«”æµæš¢ï¼Œæ²’æœ‰éŒ¯èª¤å’Œå¡é “ã€‚å¯¦ä½œä¸åŒæ–¼ Solution1 ä¸­æœ‰çš„æ–¹å¼ï¼Œä½†é‚è¼¯æ¸…æ™°å¯é€šé

- è¤‡ç¿’3(DFS,Backtracking)ï¼š2025-12-10 | è€—æ™‚ï¼š8åˆ†é˜ | ç¨ç«‹å®Œæˆï¼šæ˜¯ | é †æš¢åº¦ï¼šæµæš¢ã€‚æ•´é«”æµæš¢ï¼Œæ²’æœ‰éŒ¯èª¤å’Œå¡é “ã€‚

  - åŒæ¨£å¯¦ä½œä¸åŒæ–¼ Solution1 ä¸­æœ‰çš„æ–¹å¼ï¼Œä½†é‚è¼¯æ¸…æ™°å¯é€šéã€‚(ç›´æ¥å° board åšæ¨™è¨˜è¡¨ç¤ºè¨ªå•é)

- è¤‡ç¿’4(DFS,Backtracking)ï¼š2026-01-09 | è€—æ™‚ï¼š8åˆ†é˜ | ç¨ç«‹å®Œæˆï¼šæ˜¯ | é †æš¢åº¦ï¼šå°å¡ã€‚

  - ä¸€é–‹å§‹è©¦åœ–ä½¿ç”¨ iteration çš„æ–¹å¼å¯¦ä½œ backtrackingï¼Œå°è‡´ç‹€æ…‹çš„æ¨™è¨˜èˆ‡è¿”å›ä¸€ç›´å¡ä½

  - å¾Œä¾†æ”¹ç”¨éè¿´å¯¦ä½œ backtarckingï¼Œä¸¦ä¸”æ˜¯æ¯æ¬¡éƒ½é€²åˆ° backtracking åˆ¤æ–·(åŒ…å«é‚Šç•Œã€å€¼æ˜¯å¦åˆæ³•ç­‰)ï¼Œè€Œéåˆ¤æ–·åˆæ³•æ‰é€²åˆ° backtracking
