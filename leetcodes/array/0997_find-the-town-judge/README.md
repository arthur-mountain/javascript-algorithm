---
title: "997. Find the Town Judge"
tags:
  - Array
  - Hash Table
  - Graph
difficulty: "Easy"
date_solved: "2025-11-15"
link: "https://leetcode.com/problems/find-the-town-judge/description/"
---

## 問題描述

有 n 個人標記從 1 到 n，其中一人是秘密小鎮法官。如果小鎮法官存在，需滿足以下條件：

- 小鎮法官不相信任何人
- 每個人都相信小鎮法官，除了法官自己
- 絕對只有一個人滿足以上條件

給定一個 trust 陣列，其中 trust[i] = [a, b] 代表 a 信任編號為 b 的人。

如果信任關係不存在於 trust array 中，代表該信任關係不存在。

若小鎮法官存在，回傳小鎮法官的 label number，否則回傳 -1。

## Constraints

- 1 <= n <= 1000
- 0 <= trust.length <= 10^4
- trust[i].length == 2
- All the pairs of trust are **unique**.
- ai != bi
- 1 <= ai, bi <= n

## 解題思路

### 初步分析(觀察與發想)

- 法官必須被所有人信任，但法官自己不能相信任何人（包括自己）。如果法官信任了其他人，就會形成循環的信任關係，此時法官條件不成立。

  - 後續透過思考並參考 AI 建議，發展出 Solution1 的「信任分數」演算法

## 解法總覽

### Solution1

- **思路說明**：

  透過計算每個人的信任分數，找到分數為 n - 1 的人即為法官。原理如下：

  - 法官的信任分數必定為 n - 1，因為法官被所有其他人信任（入度 = n - 1），但自己不信任任何人（出度 = 0）

  - 普通人的信任分數不可能達到 n - 1，因為：
    - 即使被所有人信任，自己也必須信任法官，所以分數會被扣除
    - 任何信任他人的行為都會讓分數減少

  實作步驟：

  1. 初始化一個分數陣列，每個 index 代表對應人的分數
  2. 因為 label 是從 1 到 n，需要減一來轉換成陣列 index（後續找到法官的 index 時也要加一才是法官的 label）
  3. 遍歷信任關係，每一輪中：
     - 「被信任的人」分數加一（入度 +1）
     - 「信任他人的人」分數減一（出度 -1）
  4. 最後找到分數等於 n - 1 的人即為法官

- **複雜度分析**：

  - 時間複雜度：O(n + t)，其中 t 為信任關係陣列長度，n 為人數（需遍歷分數陣列）

  - 空間複雜度：O(n)，建立一個長度為 n 的陣列來計算分數

  - 通過狀態：✅ AC

- **其他備註（優化方向、特殊限制、問題延伸討論）**：

  - 雖然目前使用了圖論中入度、出度的概念，可否直接使用 Graph 資料結構來解？

    - 入度：流「入」這個節點的邊數量
    - 出度：流「出」這個節點的邊數量

    - 法官的特徵：

      - 所有人都信任他（入度 = n - 1，很多箭頭指向他）
      - 他不信任任何人（出度 = 0，沒有箭頭從他發出）

      - 因此「入度 - 出度 = n - 1」這個公式，數學上精準表達了「被所有人信任，但自己不信任任何人」這個條件

- **測試案例**：

  - 案例 A: 只有兩個人，編號 1 信任編號 2，信任關係成立

    Input: n = 2, trust = \[\[1,2\]\]

    Output: 2

    Expected: 2

  ***

  - 案例 B: 三個人，編號 1 和 2 都信任編號 3（小鎮法官），信任關係成立

    Input: n = 3, trust = [[1,3],[2,3]]

    Output: 3

    Expected: 3

  ***

  - 案例 C: 三個人，編號 1 和 2 信任編號 3，但編號 3 又信任編號 1，形成循環，信任關係不成立

    Input: n = 3, trust = [[1,3],[2,3],[3,1]]

    Output: -1

    Expected: -1

  ***

  - 案例 D: 只有一個人，無信任關係。因為法官不能相信自己，這個人自動成為法官

    Input: n = 1, trust = []

    Output: 1

    Expected: 1

  ***

  - 案例 E: 三個人，但沒有任何信任關係存在

    Input: n = 3, trust = []

    Output: -1

    Expected: -1

## 學習記錄

- 首次解題：2025-11-15 | 耗時：N/A分鐘 | 獨立完成：否。參考 AI 解答
- 複習1：2025-11-16 | 耗時：8分鐘(6分鐘釐清題目，2分鐘實作信份分數演算法) | 獨立完成：是 | 順暢度：流暢
- 複習2：2025-11-19 | 耗時：3分鐘(1分鐘釐清題目，2分鐘實作信份分數演算法) | 獨立完成：是 | 順暢度：流暢
- 複習3：2025-11-26 | 耗時：3分鐘(1分鐘釐清題目，2分鐘實作信份分數演算法) | 獨立完成：是 | 順暢度：流暢
