# LRU Cache

## ğŸ¯ è¨­è¨ˆç†å¿µ

### å­˜åœ¨æ„ç¾©

**é€™å€‹å·¥å…·è¢«ç™¼æ˜å‡ºä¾†ï¼Œæ˜¯ç‚ºäº†è§£æ±ºä»€éº¼é¡å‹çš„å•é¡Œï¼Ÿ**

| é¢å‘           | èªªæ˜                                                                                                                                        |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------- |
| **ç—›é»**       | å¿«å–å®¹é‡æœ‰é™ï¼Œç•¶ç©ºé–“ä¸è¶³æ™‚ï¼Œéœ€è¦æ±ºå®šã€Œæ·˜æ±°èª°ã€ã€‚è‹¥ç”¨ FIFOï¼ˆå…ˆé€²å…ˆå‡ºï¼‰ï¼Œæœƒæ·˜æ±°æœ€æ—©åŠ å…¥çš„é …ç›®ï¼Œä½†è©²é …ç›®å¯èƒ½ä»è¢«é »ç¹å­˜å–ï¼›è‹¥éš¨æ©Ÿæ·˜æ±°ï¼Œæ•ˆç‡æ›´å·® |
| **åƒ¹å€¼ä¸»å¼µ**   | ä»¥ **O(1)** æ™‚é–“å®Œæˆã€Œå­˜å–ã€èˆ‡ã€Œæ·˜æ±°æœ€ä¹…æœªä½¿ç”¨é …ç›®ã€ï¼Œæœ€å¤§åŒ–å¿«å–å‘½ä¸­ç‡                                                                      |
| **ä¸€å¥è©±æœ¬è³ª** | çµåˆ Hash Map çš„ O(1) æŸ¥æ‰¾èˆ‡ Doubly Linked List çš„ O(1) ä½ç½®èª¿æ•´ï¼Œå¯¦ç¾ã€Œæœ€è¿‘ä½¿ç”¨ = æœ€é«˜å„ªå…ˆã€çš„æ·˜æ±°ç­–ç•¥                                     |

```plaintext
ã€æ ¸å¿ƒæ´å¯Ÿã€‘
å–®ä¸€è³‡æ–™çµæ§‹ç„¡æ³•åŒæ™‚æ»¿è¶³å…©å€‹ O(1) éœ€æ±‚ï¼š
- Hash Mapï¼šO(1) æŸ¥æ‰¾ï¼Œä½†ç„¡æ³•è¿½è¹¤ã€Œä½¿ç”¨é †åºã€
- Linked Listï¼šO(1) èª¿æ•´é †åºï¼Œä½†æŸ¥æ‰¾æ˜¯ O(n)

â†’ LRU Cache çš„çªç ´ï¼šç”¨ Hash Map å­˜ã€Œkey â†’ ç¯€é»æŒ‡æ¨™ã€ï¼Œè®“å…©è€…äº’è£œ
```

### å¿ƒæ™ºæ¨¡å‹

**é¡æ¯”ï¼šé¤å»³ç­‰å€™å€çš„åº§ä½ç®¡ç†**

æƒ³åƒä¸€é–“é«˜ç´šé¤å»³ï¼Œç­‰å€™å€åªæœ‰å›ºå®šæ•¸é‡çš„åº§ä½ï¼ˆå¿«å–å®¹é‡ï¼‰ï¼š

| æ“ä½œ              | é¡æ¯”                                                                | å¯¦éš›æ„ç¾©                 |
| ----------------- | ------------------------------------------------------------------- | ------------------------ |
| `get(key)`        | å®¢äººå ±åˆ°ç¢ºèªé ç´„ â†’ æœå‹™ç”Ÿåœ¨åå–®ä¸Šæ‰¾åˆ°å¾Œï¼Œå°‡å®¢äººç§»åˆ°ã€Œæœ€æ–°å ±åˆ°ã€ä½ç½® | æŸ¥æ‰¾ä¸¦æ›´æ–°ç‚ºã€Œæœ€è¿‘ä½¿ç”¨ã€ |
| `put(key, value)` | æ–°å®¢äººç™»è¨˜ â†’ è‹¥åº§ä½æ»¿äº†ï¼Œè«‹æœ€ä¹…æ²’å‹•éœçš„å®¢äººé›¢é–‹ï¼Œæ–°å®¢äººå…¥åº§         | æ’å…¥æ–°é …ç›®ï¼Œå¯èƒ½è§¸ç™¼æ·˜æ±° |
| æ·˜æ±°æ©Ÿåˆ¶          | èª°æœ€ä¹…æ²’æœ‰ä»»ä½•äº’å‹•ï¼ˆå ±åˆ°ã€è©¢å•ã€æ›´æ–°ï¼‰ï¼Œå°±è«‹èª°é›¢é–‹                  | ç§»é™¤ Least Recently Used |

**é¡æ¯”çš„å±€é™æ€§**ï¼š

- çœŸå¯¦é¤å»³å¯èƒ½è€ƒæ…® VIP å„ªå…ˆç´šï¼Œä½†æ¨™æº– LRU åªçœ‹ã€Œæœ€è¿‘ä½¿ç”¨æ™‚é–“ã€
- çœŸå¯¦å ´æ™¯å®¢äººå¯èƒ½è‡ªå·±é›¢é–‹ï¼Œä½† LRU Cache çš„æ·˜æ±°å®Œå…¨ç”±ç³»çµ±æ§åˆ¶

---

## ğŸ—ï¸ æŠ½è±¡çµæ§‹

### æ ¸å¿ƒçµ„ä»¶

| çµ„ä»¶                   | åŠŸèƒ½                                 | ç‚ºä»€éº¼éœ€è¦                                 |
| ---------------------- | ------------------------------------ | ------------------------------------------ |
| **Hash Map**           | `key â†’ Node` çš„æ˜ å°„                  | O(1) å®šä½ä»»æ„ç¯€é»ï¼Œä¸éœ€éæ­·                |
| **Doubly Linked List** | ç¶­è­·ä½¿ç”¨é †åºï¼ˆé ­ = æœ€æ–°ï¼Œå°¾ = æœ€èˆŠï¼‰ | O(1) ç§»å‹•/åˆªé™¤ä»»æ„ç¯€é»ï¼ˆå› ç‚ºæœ‰ prev æŒ‡æ¨™ï¼‰ |
| **Dummy Head/Tail**    | å“¨å…µç¯€é»ï¼Œæ°¸é å­˜åœ¨                   | ç°¡åŒ–é‚Šç•Œè™•ç†ï¼Œé¿å… null æª¢æŸ¥               |
| **Capacity**           | æœ€å¤§å®¹é‡é™åˆ¶                         | è§¸ç™¼æ·˜æ±°çš„é–¾å€¼                             |

### ç‹€æ…‹è¡¨ç¤º

```
ã€åº•å±¤è³‡æ–™çµæ§‹ã€‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Hash Map: { keyâ‚ â†’ nodeâ‚, keyâ‚‚ â†’ nodeâ‚‚, ... }         â”‚
â”‚                    â†“           â†“                        â”‚
â”‚  Doubly Linked List:                                    â”‚
â”‚  [dummy_head] â‡„ [nodeâ‚] â‡„ [nodeâ‚‚] â‡„ ... â‡„ [dummy_tail] â”‚
â”‚      â†‘                                         â†‘        â”‚
â”‚   æœ€æ–°ä½¿ç”¨                                  æœ€ä¹…æœªä½¿ç”¨   â”‚
â”‚  (MRU)                                       (LRU)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åˆå§‹ç‹€æ…‹**ï¼š

- Hash Map ç‚ºç©º
- Doubly Linked List åªæœ‰ `dummy_head â‡„ dummy_tail`

**é—œéµä¸è®Šé‡**ï¼š

1. Hash Map çš„ size â‰¤ capacity
2. Hash Map ä¸­çš„æ¯å€‹ node å¿…å®šå­˜åœ¨æ–¼ Linked List ä¸­
3. Linked List çš„é †åº = ä½¿ç”¨æ™‚é–“é †åºï¼ˆhead å´æœ€æ–°ï¼‰

### æ ¸å¿ƒæ“ä½œ

#### 1. get(key)

**ç›®çš„**ï¼šå–å¾— key å°æ‡‰çš„ valueï¼Œä¸¦æ¨™è¨˜ç‚ºã€Œå‰›è¢«ä½¿ç”¨ã€

**è¼¸å…¥/è¼¸å‡º**ï¼š

- è¼¸å…¥ï¼škey
- è¼¸å‡ºï¼šå­˜åœ¨å‰‡è¿”å› valueï¼›ä¸å­˜åœ¨å‰‡è¿”å› -1

**ä¸è®Šé‡**ï¼šè‹¥ key å­˜åœ¨ï¼Œæ“ä½œå¾Œè©²ç¯€é»å¿…é ˆåœ¨ list æœ€å‰é¢

**åŸºç¤é‚è¼¯**ï¼š

```javascript
get(key) {
  if (!this.map.has(key)) return -1;

  const node = this.map.get(key);
  // é—œéµï¼šç§»åˆ°æœ€å‰é¢ï¼Œæ¨™è¨˜ç‚ºã€Œæœ€è¿‘ä½¿ç”¨ã€
  this._moveToHead(node);
  return node.value;
}
```

**ç‚ºä»€éº¼éœ€è¦ moveToHeadï¼Ÿ**

- è‹¥ä¸æ›´æ–°ä½ç½®ï¼Œå¾ŒçºŒæ·˜æ±°æ™‚ç„¡æ³•å€åˆ†ã€Œæœ€è¿‘ç”¨éã€vsã€Œå¾ˆä¹…æ²’ç”¨ã€
- é€™æ­£æ˜¯ LRU çš„æ ¸å¿ƒèªæ„ï¼šæ¯æ¬¡å­˜å–éƒ½æ˜¯ä¸€æ¬¡ã€Œä½¿ç”¨ã€

---

#### 2. put(key, value)

**ç›®çš„**ï¼šæ’å…¥æˆ–æ›´æ–°éµå€¼å°ï¼Œå¿…è¦æ™‚æ·˜æ±°æœ€ä¹…æœªä½¿ç”¨çš„é …ç›®

**è¼¸å…¥/è¼¸å‡º**ï¼š

- è¼¸å…¥ï¼škey, value
- è¼¸å‡ºï¼šç„¡ï¼ˆvoidï¼‰

**ä¸è®Šé‡**ï¼šæ“ä½œå¾Œ size â‰¤ capacity

**é‚è¼¯åˆ†æ”¯**ï¼š

```javascript
put(key, value) {
  if (this.map.has(key)) {
    // Case 1: key å·²å­˜åœ¨ â†’ æ›´æ–° value + ç§»åˆ°æœ€å‰
    const node = this.map.get(key);
    node.value = value;
    this._moveToHead(node);
  } else {
    // Case 2: key ä¸å­˜åœ¨ â†’ å‰µå»ºæ–°ç¯€é»
    const newNode = new Node(key, value);
    this.map.set(key, newNode);
    this._addToHead(newNode);

    // Case 2a: è¶…éå®¹é‡ â†’ æ·˜æ±°æœ€èˆŠçš„
    if (this.map.size > this.capacity) {
      const tail = this._removeTail();
      this.map.delete(tail.key);  // é—œéµï¼šåŒæ­¥åˆªé™¤ map ä¸­çš„æ˜ å°„
    }
  }
}
```

**ç‚ºä»€éº¼ç¯€é»è¦å­˜ keyï¼Ÿ**

- ç•¶å¾ list å°¾éƒ¨æ·˜æ±°ç¯€é»æ™‚ï¼Œéœ€è¦çŸ¥é“å°æ‡‰çš„ key æ‰èƒ½å¾ Hash Map ä¸­åˆªé™¤
- é€™æ˜¯ã€Œé›™å‘æ˜ å°„ã€çš„å¿…è¦ä»£åƒ¹

---

#### 3. è¼”åŠ©æ“ä½œï¼ˆInternalï¼‰

| æ“ä½œ                | åŠŸèƒ½                              | è¤‡é›œåº¦ |
| ------------------- | --------------------------------- | ------ |
| `_addToHead(node)`  | å°‡ç¯€é»æ’å…¥åˆ° dummy_head ä¹‹å¾Œ      | O(1)   |
| `_removeNode(node)` | å¾ list ä¸­ç§»é™¤æŒ‡å®šç¯€é»            | O(1)   |
| `_moveToHead(node)` | = removeNode + addToHead          | O(1)   |
| `_removeTail()`     | ç§»é™¤ dummy_tail ä¹‹å‰çš„ç¯€é»ï¼ˆLRUï¼‰ | O(1)   |

```javascript
_addToHead(node) {
  // æ’å…¥åˆ° dummy_head å’ŒåŸæœ¬ç¬¬ä¸€å€‹ç¯€é»ä¹‹é–“
  node.prev = this.head;
  node.next = this.head.next;
  this.head.next.prev = node;
  this.head.next = node;
}

_removeNode(node) {
  // ç›´æ¥ä¿®æ”¹å‰å¾Œç¯€é»çš„æŒ‡æ¨™ï¼Œè·³éç•¶å‰ç¯€é»
  node.prev.next = node.next;
  node.next.prev = node.prev;
}

_moveToHead(node) {
  this._removeNode(node);
  this._addToHead(node);
}

_removeTail() {
  // dummy_tail.prev å°±æ˜¯æœ€ä¹…æœªä½¿ç”¨çš„ç¯€é»
  const node = this.tail.prev;
  this._removeNode(node);
  return node;  // è¿”å›ç¯€é»ä»¥ä¾¿å¾ map ä¸­åˆªé™¤
}
```

### æ ¸å¿ƒæ“ä½œè¤‡é›œåº¦ç¸½çµ

| æ“ä½œ                | æ™‚é–“è¤‡é›œåº¦ | ç©ºé–“è¤‡é›œåº¦ | å‚™è¨»                     |
| ------------------- | ---------- | ---------- | ------------------------ |
| **get(key)**        | **O(1)**   | O(1)       | Hash Map æŸ¥æ‰¾ + æŒ‡æ¨™æ“ä½œ |
| **put(key, value)** | **O(1)**   | O(1)       | åŒ…å«å¯èƒ½çš„æ·˜æ±°æ“ä½œ       |
| \_addToHead         | O(1)       | O(1)       | 4 æ¬¡æŒ‡æ¨™ä¿®æ”¹             |
| \_removeNode        | O(1)       | O(1)       | 2 æ¬¡æŒ‡æ¨™ä¿®æ”¹             |
| \_removeTail        | O(1)       | O(1)       | å®šä½ + ç§»é™¤              |

**ç¬¦è™Ÿå®šç¾©**ï¼š

- `n`ï¼šç•¶å‰å¿«å–ä¸­çš„é …ç›®æ•¸é‡
- `capacity`ï¼šæœ€å¤§å®¹é‡

**çµæ§‹æœ¬èº«çš„ç©ºé–“è¤‡é›œåº¦**ï¼šO(capacity)

- æ¯å€‹ç¯€é»å­˜ï¼škey + value + prev + next = 4 å€‹æ¬„ä½
- Hash Map é¡å¤–å­˜ï¼škey â†’ node æ˜ å°„

---

## ğŸ” è§¸ç™¼å™¨ï¼ˆæ¨¡å¼è­˜åˆ¥ï¼‰

### æ­£å‘è§¸ç™¼å™¨

| å±¤ç´š         | ç‰¹å¾µ                                                    | ç‚ºä»€éº¼é€™å€‹ç‰¹å¾µæŒ‡å‘ LRU Cache |
| ------------ | ------------------------------------------------------- | ---------------------------- |
| **é—œéµå­—**   | "cache", "least recently used", "LRU", "capacity limit" | ç›´æ¥é»å                     |
| **é—œéµå­—**   | "evict", "æ·˜æ±°", "æœ€ä¹…æœªä½¿ç”¨"                           | LRU çš„æ·˜æ±°ç­–ç•¥               |
| **çµæ§‹**     | éœ€è¦ O(1) get + O(1) put + å®¹é‡é™åˆ¶                     | é€™ä¸‰å€‹ç´„æŸçš„äº¤é›†å°±æ˜¯ LRU     |
| **ç›®æ¨™**     | è¿½è¹¤ã€Œä½¿ç”¨é †åºã€è€Œéã€Œæ’å…¥é †åºã€                        | å€åˆ¥æ–¼æ™®é€š Queue             |
| **æ“ä½œæ¨¡å¼** | å­˜å–æ™‚éœ€è¦ã€Œæå‡å„ªå…ˆç´šã€                                | moveToHead æ“ä½œ              |

**ä¸€å¥è©±è§¸ç™¼è¦å‰‡**ï¼š

> ç•¶é¡Œç›®è¦æ±‚ã€Œå›ºå®šå®¹é‡çš„ key-value å­˜å„²ã€+ã€ŒO(1) å­˜å–ã€+ã€Œæ·˜æ±°æœ€ä¹…æœªä½¿ç”¨ã€â†’ LRU Cache

### åå‘è§¸ç™¼å™¨

| é™·é˜±æƒ…å¢ƒ                       | ç‚ºä»€éº¼ä¸é©ç”¨         | æ›´å¥½çš„é¸æ“‡                                 |
| ------------------------------ | -------------------- | ------------------------------------------ |
| éœ€è¦æ·˜æ±°ã€Œä½¿ç”¨æ¬¡æ•¸æœ€å°‘ã€çš„é …ç›® | LRU çœ‹æ™‚é–“ï¼Œä¸çœ‹é »ç‡ | **LFU Cache**ï¼ˆLeast Frequently Usedï¼‰     |
| éœ€è¦æ·˜æ±°ã€Œæœ€æ—©æ’å…¥ã€çš„é …ç›®     | é€™æ˜¯ FIFOï¼Œä¸æ˜¯ LRU  | **Queue** æˆ– **LinkedHashMapï¼ˆæ’å…¥é †åºï¼‰** |
| éœ€è¦æŒ‰ã€ŒéæœŸæ™‚é–“ã€æ·˜æ±°         | LRU ç„¡ TTL æ¦‚å¿µ      | **TTL Cache**ï¼ˆTime-To-Liveï¼‰              |
| å®¹é‡ç„¡é™åˆ¶                     | ä¸éœ€è¦æ·˜æ±°æ©Ÿåˆ¶       | æ™®é€š **Hash Map**                          |

### èˆ‡é¡ä¼¼å·¥å…·çš„æ±ºç­–é»

```plaintext
å¿«å–æ·˜æ±°ç­–ç•¥
â”œâ”€â”€ æŒ‰ã€Œæ™‚é–“ã€æ·˜æ±°
â”‚   â”œâ”€â”€ æœ€ä¹…æœªã€Œä½¿ç”¨ã€â†’ LRU Cache
â”‚   â”œâ”€â”€ æœ€ä¹…æœªã€Œæ’å…¥ã€â†’ FIFO Queue
â”‚   â””â”€â”€ è¶…éã€Œå­˜æ´»æ™‚é–“ã€â†’ TTL Cache
â”œâ”€â”€ æŒ‰ã€Œé »ç‡ã€æ·˜æ±°
â”‚   â””â”€â”€ ä½¿ç”¨æ¬¡æ•¸æœ€å°‘ â†’ LFU Cache
â””â”€â”€ æŒ‰ã€Œå„ªå…ˆç´šã€æ·˜æ±°
    â””â”€â”€ è‡ªå®šç¾©å„ªå…ˆç´š â†’ Priority Queue + Hash Map
```

---

## âš ï¸ æ³¨æ„äº‹é …

### å¸¸è¦‹é™·é˜±

| é™·é˜±                     | éŒ¯èª¤å¯«æ³•                         | æ­£ç¢ºå¯«æ³•                    | ç‚ºä»€éº¼                   |
| ------------------------ | -------------------------------- | --------------------------- | ------------------------ |
| **å¿˜è¨˜æ›´æ–°ä½ç½®**         | `get` åªè¿”å› valueï¼Œä¸ç§»å‹•ç¯€é»   | `get` å¿…é ˆèª¿ç”¨ `moveToHead` | å¦å‰‡ç„¡æ³•è¿½è¹¤ã€Œæœ€è¿‘ä½¿ç”¨ã€ |
| **æ·˜æ±°æ™‚å¿˜è¨˜åˆª map**     | åªå¾ list ç§»é™¤ç¯€é»               | åŒæ™‚å¾ map å’Œ list ç§»é™¤     | å¦å‰‡ map ä¸­ç•™æœ‰å­¤å…’æŒ‡æ¨™  |
| **put æ™‚å¿˜è¨˜è™•ç†å·²å­˜åœ¨** | ç›´æ¥å‰µå»ºæ–°ç¯€é»                   | å…ˆæª¢æŸ¥æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨å‰‡æ›´æ–°  | å¦å‰‡æœƒæœ‰é‡è¤‡ key         |
| **æŒ‡æ¨™é †åºéŒ¯èª¤**         | å…ˆä¿®æ”¹ node.nextï¼Œå†ç”¨ node.next | å…ˆä¿å­˜éœ€è¦çš„æŒ‡æ¨™ï¼Œå†ä¿®æ”¹    | å¦å‰‡ä¸Ÿå¤±åŸå§‹é€£çµ         |
| **æœªä½¿ç”¨ dummy nodes**   | head/tail æ˜¯å¯¦éš›ç¯€é»             | ä½¿ç”¨å“¨å…µç¯€é»                | å¦å‰‡é‚Šç•Œè™•ç†è¤‡é›œä¸”æ˜“éŒ¯   |

### å¸¸è¦‹è®Šé«”

| è®Šé«”                  | ä¿®æ”¹å…§å®¹                                  | é©ç”¨å ´æ™¯           |
| --------------------- | ----------------------------------------- | ------------------ |
| **LRU with TTL**      | ç¯€é»å¢åŠ  `expireTime`ï¼Œget/put æ™‚æª¢æŸ¥éæœŸ | éœ€è¦è‡ªå‹•éæœŸçš„å¿«å– |
| **Thread-safe LRU**   | åŠ é–æˆ–ä½¿ç”¨ ConcurrentHashMap              | å¤šåŸ·è¡Œç·’ç’°å¢ƒ       |
| **LRU with Callback** | æ·˜æ±°æ™‚è§¸ç™¼å›èª¿å‡½æ•¸                        | éœ€è¦é€šçŸ¥æˆ–æ¸…ç†è³‡æº |
| **Bounded LRU**       | é™åˆ¶ key/value çš„å¤§å°ï¼Œè€Œéæ•¸é‡           | è¨˜æ†¶é«”æ•æ„Ÿå ´æ™¯     |

---

## â­ æŠ½è±¡åŒ–ç¿»è­¯å™¨

### è­˜åˆ¥æ ¸å¿ƒæŠ½è±¡

> **é€™å€‹å·¥å…·çš„æ ¸å¿ƒå°è±¡æ˜¯**ï¼šå¸¶æœ‰ã€Œä½¿ç”¨æ™‚é–“æˆ³ã€çš„ key-value pair
>
> **å®ƒç®¡ç†çš„æ˜¯é€™äº›å°è±¡ä¹‹é–“çš„ä»€éº¼é—œä¿‚ï¼Ÿ** æŒ‰ã€Œæœ€è¿‘ä½¿ç”¨æ™‚é–“ã€æ’åºçš„å„ªå…ˆé †åº

### å»ºç«‹æ˜ å°„ç¶­åº¦

| ç¶­åº¦                 | è¦å›ç­”çš„å•é¡Œ               | é€™å€‹ç­”æ¡ˆæ±ºå®šäº†ä»€éº¼     |
| -------------------- | -------------------------- | ---------------------- |
| **ç¶­åº¦ 1ï¼šå®¹é‡**     | å¿«å–æœ€å¤šèƒ½å­˜å¤šå°‘é …ç›®ï¼Ÿ     | capacity çš„è¨­å®š        |
| **ç¶­åº¦ 2ï¼šéµå€¼å®šç¾©** | ä»€éº¼æ˜¯ keyï¼Ÿä»€éº¼æ˜¯ valueï¼Ÿ | Node çµæ§‹è¨­è¨ˆ          |
| **ç¶­åº¦ 3ï¼šä½¿ç”¨èªæ„** | ä»€éº¼æ“ä½œç®—ã€Œä½¿ç”¨ã€ï¼Ÿ       | ä½•æ™‚èª¿ç”¨ moveToHead    |
| **ç¶­åº¦ 4ï¼šæ·˜æ±°è§¸ç™¼** | ä½•æ™‚éœ€è¦æ·˜æ±°ï¼Ÿ             | put å¾Œ size > capacity |

### å¯¦æˆ°æª¢æŸ¥è¡¨

```plaintext
é¡Œç›®ï¼š_______________

ç¶­åº¦ 1ï¼ˆå®¹é‡ï¼‰çš„ç­”æ¡ˆï¼š_______________
ç¶­åº¦ 2ï¼ˆéµå€¼å®šç¾©ï¼‰çš„ç­”æ¡ˆï¼š_______________
ç¶­åº¦ 3ï¼ˆä½¿ç”¨èªæ„ï¼‰çš„ç­”æ¡ˆï¼š_______________
ç¶­åº¦ 4ï¼ˆæ·˜æ±°è§¸ç™¼ï¼‰çš„ç­”æ¡ˆï¼š_______________

å¡«å®Œå¾Œï¼Œæ ¸å¿ƒé‚è¼¯æ‡‰è©²èƒ½ç›´æ¥å¯«å‡ºã€‚
```

### æ˜ å°„ç¯„ä¾‹

**é¡Œç›® A**ï¼š[146. LRU Cache](https://leetcode.com/problems/lru-cache/)

| ç¶­åº¦   | å…·é«”å•é¡Œ                      | æŠ½è±¡æ˜ å°„                          |
| ------ | ----------------------------- | --------------------------------- |
| ç¶­åº¦ 1 | capacity ç”±æ§‹é€ å‡½æ•¸å‚³å…¥       | `this.capacity = capacity`        |
| ç¶­åº¦ 2 | key å’Œ value éƒ½æ˜¯æ•´æ•¸         | `Node { key, value, prev, next }` |
| ç¶­åº¦ 3 | get å’Œ put éƒ½ç®—ã€Œä½¿ç”¨ã€       | å…©è€…éƒ½èª¿ç”¨ moveToHead             |
| ç¶­åº¦ 4 | put æ–° key ä¸” size > capacity | èª¿ç”¨ removeTail + map.delete      |

---

## ğŸ¯ é—œéµæ´å¯Ÿç¸½çµ

| å•é¡Œ                                            | ç­”æ¡ˆ                                          |
| ----------------------------------------------- | --------------------------------------------- |
| ç‚ºä»€éº¼è¦ç”¨ **Doubly** Linked Listï¼Ÿ             | éœ€è¦ O(1) åˆªé™¤ä»»æ„ç¯€é»ï¼Œå¿…é ˆèƒ½ç›´æ¥è¨ªå• prev   |
| ç‚ºä»€éº¼ Node è¦å­˜ **key**ï¼Ÿ                      | æ·˜æ±°æ™‚éœ€è¦çŸ¥é“ key ä¾†åŒæ­¥åˆªé™¤ map ä¸­çš„æ˜ å°„    |
| ç‚ºä»€éº¼ç”¨ **dummy** head/tailï¼Ÿ                  | é¿å…ç©º list æˆ–å–®ç¯€é»æ™‚çš„é‚Šç•Œæ¢ä»¶è™•ç†          |
| get ç‚ºä»€éº¼è¦ **moveToHead**ï¼Ÿ                   | é€™æ˜¯ LRU çš„æ ¸å¿ƒèªæ„ï¼šå­˜å– = ä½¿ç”¨              |
| ç‚ºä»€éº¼ **Hash Map + Linked List** èƒ½é”æˆ O(1)ï¼Ÿ | Map è§£æ±ºæŸ¥æ‰¾å•é¡Œï¼ŒList è§£æ±ºé †åºå•é¡Œï¼Œäº’è£œçŸ­æ¿ |
