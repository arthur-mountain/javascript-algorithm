# Circular Queue (ç’°ç‹€ä½‡åˆ—)

## ğŸ¯ è¨­è¨ˆç†å¿µ

### å­˜åœ¨æ„ç¾©

**é€™å€‹å·¥å…·è¢«ç™¼æ˜å‡ºä¾†ï¼Œæ˜¯ç‚ºäº†è§£æ±ºä»€éº¼é¡å‹çš„å•é¡Œï¼Ÿ**

```plaintext
ç—›é»ï¼šéœ€è¦æŒ‰ç…§ã€Œåˆ°é”é †åºã€è™•ç†å…ƒç´ ï¼Œä½† Array çš„ shift() æ˜¯ O(n)ï¼ŒStack åªèƒ½è™•ç†æœ€æ–°çš„å…ƒç´ 
åƒ¹å€¼ä¸»å¼µï¼šä»¥ O(1) æ™‚é–“å®Œæˆã€ŒåŠ å…¥å°¾ç«¯ã€èˆ‡ã€Œå¾é ­ç«¯ç§»é™¤ã€ï¼Œä¿è­‰è™•ç†é †åºç¬¦åˆåˆ°é”é †åº
ä¸€å¥è©±æœ¬è³ªï¼šå°ˆé–€ç®¡ç†ã€Œå…ˆä¾†å…ˆæœå‹™ã€é †åºçš„è³‡æ–™çµæ§‹
```

Queue çš„æ ¸å¿ƒåƒ¹å€¼åœ¨æ–¼**å¼·åˆ¶åŸ·è¡Œæ™‚åºå…¬å¹³æ€§**ï¼šç„¡è«–ç³»çµ±å¤šç¹å¿™ï¼Œå…ˆåˆ°çš„è«‹æ±‚ä¸€å®šå…ˆè¢«è™•ç†ã€‚é€™å€‹ä¿è­‰åœ¨å¾ˆå¤šå ´æ™¯æ˜¯å¿…é ˆçš„ï¼Œä¾‹å¦‚ä»»å‹™æ’ç¨‹ã€è¨Šæ¯å‚³éã€å»£åº¦å„ªå…ˆæœå°‹ç­‰ã€‚

### å¿ƒæ™ºæ¨¡å‹

**é¡æ¯”ï¼šéŠ€è¡Œæ’éšŠå«è™Ÿç³»çµ±**

- `enqueue(customer)`ï¼šå®¢æˆ¶æŠ½è™Ÿç¢¼ç‰Œï¼ŒåŠ å…¥ç­‰å€™éšŠä¼çš„å°¾ç«¯
- `dequeue()`ï¼šå«ä¸‹ä¸€è™Ÿï¼Œæ’åœ¨æœ€å‰é¢çš„å®¢æˆ¶é›¢é–‹å»è¾¦ç†æ¥­å‹™
- `front()`ï¼šçœ‹ä¸€ä¸‹ç›®å‰æ’åœ¨æœ€å‰é¢çš„æ˜¯å¹¾è™Ÿï¼Œä½†ä¸å«è™Ÿ
- `isEmpty()`ï¼šæª¢æŸ¥ç­‰å€™å€æ˜¯å¦é‚„æœ‰äºº

**å±€é™æ€§**ï¼š

- çœŸå¯¦æ’éšŠå¯èƒ½æœ‰äººæ’éšŠæˆ–é›¢é–‹ï¼Œä½†æ¨™æº– Queue ä¸æ”¯æ´ä¸­é–“ä½ç½®æ“ä½œ
- çœŸå¯¦å ´æ™¯å¯èƒ½æœ‰å„ªå…ˆé€šé“ï¼ˆVIPï¼‰ï¼Œé€™éœ€è¦ Priority Queueï¼Œä¸æ˜¯åŸºæœ¬ Queue

---

## ğŸ—ï¸ æŠ½è±¡çµæ§‹

### æ ¸å¿ƒçµ„ä»¶

| çµ„ä»¶        | åŠŸèƒ½                         | ç‚ºä»€éº¼éœ€è¦              |
| ----------- | ---------------------------- | ----------------------- |
| åº•å±¤å„²å­˜å€  | å­˜æ”¾æ’éšŠä¸­çš„å…ƒç´              | å¯¦éš›å®¹ç´è³‡æ–™            |
| front æŒ‡æ¨™  | æŒ‡å‘ã€Œä¸‹ä¸€å€‹è¦è¢«æœå‹™çš„ä½ç½®ã€ | è®“ dequeue çŸ¥é“å¾å“ªè£¡å– |
| rear æŒ‡æ¨™   | æŒ‡å‘ã€Œä¸‹ä¸€å€‹è¦åŠ å…¥çš„ä½ç½®ã€   | è®“ enqueue çŸ¥é“æ”¾åœ¨å“ªè£¡ |
| length/size | è¿½è¹¤ç›®å‰æœ‰å¤šå°‘å…ƒç´            | åˆ¤æ–·ç©º/æ»¿ï¼Œé¿å…éæ³•æ“ä½œ |

### ç‹€æ…‹è¡¨ç¤º

**åº•å±¤è³‡æ–™çµæ§‹é¸æ“‡**ï¼š

| å¯¦ä½œæ–¹å¼           | enqueue   | dequeue  | ç©ºé–“æ•ˆç‡           | é©ç”¨å ´æ™¯               |
| ------------------ | --------- | -------- | ------------------ | ---------------------- |
| Array + shift()    | O(1)      | **O(n)** | å‹•æ…‹               | ä¸æ¨è–¦ï¼Œdequeue æ•ˆèƒ½å·® |
| Circular Array     | O(1)      | O(1)     | å›ºå®š capacity      | å·²çŸ¥æœ€å¤§å®¹é‡           |
| Linked List        | O(1)      | O(1)     | å‹•æ…‹ï¼Œé¡å¤–æŒ‡æ¨™é–‹éŠ· | å…ƒç´ æ•¸é‡è®ŠåŒ–å¤§         |
| Double-ended Array | O(1) æ”¤éŠ· | O(1)     | å‹•æ…‹               | é€šç”¨è§£æ³•               |

**åˆå§‹ç‹€æ…‹**ï¼š

```plaintext
Circular Array ç‰ˆæœ¬ï¼š
â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚  capacity = 5
â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜
  â†‘
front = rear = -1 (è¡¨ç¤ºç©º)

Linked List ç‰ˆæœ¬ï¼š
head â†’ null
tail â†’ null
size = 0
```

**é—œéµç‹€æ…‹å®šç¾©**ï¼š

- **ç©º**ï¼š`front === -1`ï¼ˆCircularï¼‰æˆ– `head === null`ï¼ˆLinked Listï¼‰
- **æ»¿**ï¼š`front === (rear + 1) % capacity`ï¼ˆåƒ… Circular Arrayï¼‰
- **å…ƒç´ æ•¸é‡**ï¼š`(rear - front + 1 + capacity) % capacity`ï¼ˆéœ€è™•ç†ç’°ç¹ï¼‰

### æ ¸å¿ƒæ“ä½œ

#### 1. enqueue(item)

**ç›®çš„**ï¼šå°‡æ–°å…ƒç´ åŠ å…¥éšŠä¼å°¾ç«¯

**è¼¸å…¥/è¼¸å‡º**ï¼šitem â†’ booleanï¼ˆæ˜¯å¦æˆåŠŸåŠ å…¥ï¼‰

**ä¸è®Šé‡**ï¼š

- æ–°å…ƒç´ å¿…é ˆæˆç‚ºã€Œæœ€å¾Œä¸€å€‹è¢«è™•ç†çš„ã€
- æ—¢æœ‰å…ƒç´ çš„ç›¸å°é †åºä¸è®Š

**åŸºç¤å¯¦ä½œ**ï¼ˆä½¿ç”¨ Array + push/shiftï¼‰ï¼š

```javascript
enqueue(item) {
  this.queue.push(item);   // O(1)
  return true;
}

dequeue() {
  return this.queue.shift(); // O(n) â† å•é¡Œï¼
}
```

**åŸºç¤ç‰ˆæœ¬çš„å•é¡Œ**ï¼š

- `shift()` éœ€è¦å°‡æ‰€æœ‰å…ƒç´ å¾€å‰ç§»å‹•ä¸€æ ¼ï¼Œé€ æˆ O(n)
- ç•¶ Queue é »ç¹æ“ä½œæ™‚ï¼Œn æ¬¡ dequeue ç´¯ç©æˆ O(nÂ²)

**å„ªåŒ–ç­–ç•¥**ï¼šCircular Arrayï¼ˆç’°ç‹€é™£åˆ—ï¼‰

- æ ¸å¿ƒæ€æƒ³ï¼š**ä¸ç§»å‹•å…ƒç´ ï¼Œåªç§»å‹•æŒ‡æ¨™**
- æŠŠé™£åˆ—ã€Œé ­å°¾ç›¸æ¥ã€æƒ³åƒæˆä¸€å€‹åœ“åœˆï¼Œç”¨ `% capacity` è®“ç´¢å¼•è‡ªå‹•ç’°ç¹

```javascript
enqueue(item) {
  if (this.isFull()) return false;

  if (this.isEmpty()) {
    // ç¬¬ä¸€å€‹å…ƒç´ ï¼šåˆå§‹åŒ–å…©å€‹æŒ‡æ¨™
    this.front = this.rear = 0;
  } else {
    // å¾ŒçºŒå…ƒç´ ï¼šrear å¾€å¾Œç§»å‹•ï¼ˆç’°ç‹€ï¼‰
    this.rear = (this.rear + 1) % this.capacity;
  }

  this.queue[this.rear] = item;
  return true;
}
```

**è¦–è¦ºåŒ–èªªæ˜**ï¼š

```plaintext
åˆå§‹ç‹€æ…‹ï¼šfront = rear = -1 (ç©º)
â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜

enqueue(A)ï¼šfront = rear = 0
â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”
â”‚ A â”‚   â”‚   â”‚   â”‚   â”‚
â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜
  â†‘
 f,r

enqueue(B), enqueue(C)ï¼š
â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”
â”‚ A â”‚ B â”‚ C â”‚   â”‚   â”‚
â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜
  â†‘       â†‘
  f       r

dequeue() â†’ Aï¼Œfront = 1ï¼š
â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”
â”‚   â”‚ B â”‚ C â”‚   â”‚   â”‚
â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜
      â†‘   â†‘
      f   r

enqueue(D), enqueue(E), enqueue(F)ï¼šç’°ç¹ç™¼ç”Ÿï¼
â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”
â”‚ F â”‚ B â”‚ C â”‚ D â”‚ E â”‚
â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜
  â†‘   â†‘
  r   f
```

**å„ªåŒ–å¾Œçš„è¤‡é›œåº¦**ï¼šO(1) æ™‚é–“ï¼ŒO(1) é¡å¤–ç©ºé–“

---

#### 2. dequeue()

**ç›®çš„**ï¼šç§»é™¤ä¸¦å›å‚³éšŠä¼æœ€å‰ç«¯çš„å…ƒç´ 

**è¼¸å…¥/è¼¸å‡º**ï¼švoid â†’ itemï¼ˆè¢«ç§»é™¤çš„å…ƒç´ ï¼‰æˆ– nullï¼ˆå¦‚æœç©ºï¼‰

**ä¸è®Šé‡**ï¼š

- å›å‚³çš„å¿…é ˆæ˜¯ã€Œæœ€æ—©åŠ å…¥ä¸”å°šæœªè¢«ç§»é™¤ã€çš„å…ƒç´ 
- å‰©é¤˜å…ƒç´ çš„ç›¸å°é †åºä¸è®Š

**Circular Array å¯¦ä½œ**ï¼š

```javascript
dequeue() {
  if (this.isEmpty()) return null;

  const item = this.queue[this.front];

  if (this.front === this.rear) {
    // æœ€å¾Œä¸€å€‹å…ƒç´ ï¼šé‡ç½®ç‚ºç©ºç‹€æ…‹
    this.front = this.rear = -1;
  } else {
    // é‚„æœ‰å…¶ä»–å…ƒç´ ï¼šfront å¾€å¾Œç§»å‹•ï¼ˆç’°ç‹€ï¼‰
    this.front = (this.front + 1) % this.capacity;
  }

  return item;
}
```

**é—œéµï¼šç‚ºä»€éº¼éœ€è¦ç‰¹åˆ¥è™•ç† `front === rear`ï¼Ÿ**

é€™è¡¨ç¤ºåªå‰©ä¸€å€‹å…ƒç´ ï¼Œdequeue å¾Œæ‡‰è©²å›åˆ°ç©ºç‹€æ…‹ `front = rear = -1`ï¼Œå¦å‰‡ä¸‹æ¬¡ `isEmpty()` åˆ¤æ–·æœƒéŒ¯èª¤ã€‚

---

#### 3. isEmpty() / isFull()

```javascript
isEmpty() {
  return this.front === -1;
}

isFull() {
  return this.front === (this.rear + 1) % this.capacity;
}
```

**è¦–è¦ºåŒ– isFull çš„åˆ¤æ–·**ï¼š

```plaintext
æ»¿çš„ç‹€æ…‹ï¼šrear çš„ä¸‹ä¸€æ ¼å°±æ˜¯ front
â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”
â”‚ E â”‚ B â”‚ C â”‚ D â”‚   â”‚  â† é€™ä¸æ˜¯æ»¿ï¼Œé‚„æœ‰ä¸€æ ¼
â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜
  â†‘   â†‘
  r   f

â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”
â”‚ F â”‚ B â”‚ C â”‚ D â”‚ E â”‚  â† é€™æ˜¯æ»¿ï¼(rear+1) % 5 = 1 = front
â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜
  â†‘   â†‘
  r   f
```

---

### æ ¸å¿ƒæ“ä½œè¤‡é›œåº¦ç¸½çµ

| æ“ä½œ           | Array + shift | Circular Array | Linked List | å‚™è¨»                   |
| -------------- | ------------- | -------------- | ----------- | ---------------------- |
| **enqueue**    | O(1)          | **O(1)**       | O(1)        | åŠ å…¥å°¾ç«¯               |
| **dequeue**    | O(n)          | **O(1)**       | O(1)        | Circular/LL ä¸ç§»å‹•å…ƒç´  |
| **front/peek** | O(1)          | O(1)           | O(1)        | åªè®€å–ä¸ç§»é™¤           |
| **isEmpty**    | O(1)          | O(1)           | O(1)        |                        |
| **isFull**     | N/A           | O(1)           | N/A         | åƒ…å›ºå®šå®¹é‡ç‰ˆæœ¬         |
| **size**       | O(1)          | O(1)           | O(1)        | ç¶­è­·è¨ˆæ•¸å™¨             |

**ç¬¦è™Ÿå®šç¾©**ï¼š

- `n`ï¼šQueue ä¸­ç›®å‰çš„å…ƒç´ æ•¸é‡

**çµæ§‹æœ¬èº«çš„ç©ºé–“è¤‡é›œåº¦**ï¼š

- Circular Arrayï¼šO(capacity)ï¼Œå¯èƒ½æœ‰æœªä½¿ç”¨ç©ºé–“
- Linked Listï¼šO(n)ï¼Œæ¯å€‹ç¯€é»é¡å¤–éœ€è¦æŒ‡æ¨™ç©ºé–“

---

## â­ æŠ½è±¡åŒ–ç¿»è­¯å™¨

### è­˜åˆ¥æ ¸å¿ƒæŠ½è±¡

> é€™å€‹å·¥å…·çš„æ ¸å¿ƒå°è±¡æ˜¯ï¼š**éœ€è¦æŒ‰é †åºè™•ç†çš„å…ƒç´ åºåˆ—**
>
> å®ƒç®¡ç†çš„æ˜¯é€™äº›å°è±¡ä¹‹é–“çš„ä»€éº¼é—œä¿‚ï¼Ÿ**åˆ°é”æ™‚é–“çš„å…ˆå¾Œé †åºï¼ˆæ™‚åºé—œä¿‚ï¼‰**

Queue çš„æœ¬è³ªæ˜¯**æ™‚åºä¿åºå™¨**ï¼šèª°å…ˆé€²ä¾†ï¼Œèª°å…ˆå‡ºå»ã€‚ç•¶ä½ çœ‹åˆ°ä¸€å€‹å•é¡Œï¼Œéœ€è¦æ€è€ƒï¼š

1. æœ‰æ²’æœ‰ã€Œå…ˆå¾Œé †åºã€çš„æ¦‚å¿µï¼Ÿ
2. æ˜¯å¦éœ€è¦ã€ŒæŒ‰é †åºè™•ç†ã€ï¼Ÿ
3. è™•ç†å®Œä¸€å€‹æ‰èƒ½è™•ç†ä¸‹ä¸€å€‹ï¼Ÿ

### å»ºç«‹æ˜ å°„ç¶­åº¦

| ç¶­åº¦                 | è¦å›ç­”çš„å•é¡Œ               | é€™å€‹ç­”æ¡ˆæ±ºå®šäº†ä»€éº¼   |
| -------------------- | -------------------------- | -------------------- |
| **ç¶­åº¦ 1ï¼šå…ƒç´ **     | ä»€éº¼æ±è¥¿éœ€è¦æ’éšŠï¼Ÿ         | Queue å­˜ä»€éº¼å‹åˆ¥     |
| **ç¶­åº¦ 2ï¼šå…¥éšŠæ™‚æ©Ÿ** | ä»€éº¼äº‹ä»¶è§¸ç™¼ã€ŒåŠ å…¥éšŠä¼ã€ï¼Ÿ | enqueue æ”¾åœ¨å“ªè£¡å‘¼å« |
| **ç¶­åº¦ 3ï¼šå‡ºéšŠæ™‚æ©Ÿ** | ä»€éº¼æ¢ä»¶ä¸‹ã€Œè™•ç†ä¸‹ä¸€å€‹ã€ï¼Ÿ | dequeue çš„è¿´åœˆæ¢ä»¶   |
| **ç¶­åº¦ 4ï¼šçµ‚æ­¢æ¢ä»¶** | ä»€éº¼æ™‚å€™éšŠä¼æ‡‰è©²æ¸…ç©ºï¼Ÿ     | while è¿´åœˆä½•æ™‚çµæŸ   |

### å¯¦æˆ°æª¢æŸ¥è¡¨

```plaintext
é¡Œç›®ï¼š_______________

ç¶­åº¦ 1ï¼ˆå…ƒç´ ï¼‰ï¼šQueue è£¡æ”¾ä»€éº¼ï¼Ÿ
  â†’ ç¯€é»ï¼Ÿåº§æ¨™ï¼Ÿç‹€æ…‹ï¼Ÿç´¢å¼•ï¼Ÿ

ç¶­åº¦ 2ï¼ˆå…¥éšŠæ™‚æ©Ÿï¼‰ï¼šä»€éº¼æ™‚å€™ enqueueï¼Ÿ
  â†’ ç™¼ç¾æ–°çš„å¾…è™•ç†å°è±¡æ™‚

ç¶­åº¦ 3ï¼ˆå‡ºéšŠæ™‚æ©Ÿï¼‰ï¼šä»€éº¼æ™‚å€™ dequeueï¼Ÿ
  â†’ æº–å‚™è™•ç†ç•¶å‰å°è±¡æ™‚

ç¶­åº¦ 4ï¼ˆçµ‚æ­¢æ¢ä»¶ï¼‰ï¼šè¿´åœˆä½•æ™‚çµæŸï¼Ÿ
  â†’ Queue ç©ºäº† / æ‰¾åˆ°ç­”æ¡ˆäº†

å¡«å®Œå¾Œï¼ŒBFS æ¨¡æ¿å¯ä»¥ç›´æ¥å¥—ç”¨ã€‚
```

### æ˜ å°„ç¯„ä¾‹

**é¡Œç›® A**ï¼šBinary Tree Level Order Traversalï¼ˆ102ï¼‰

| ç¶­åº¦   | å…·é«”å•é¡Œ                 | æŠ½è±¡æ˜ å°„                       |
| ------ | ------------------------ | ------------------------------ |
| ç¶­åº¦ 1 | éœ€è¦æŒ‰å±¤è™•ç†çš„æ˜¯ä»€éº¼ï¼Ÿ   | TreeNode                       |
| ç¶­åº¦ 2 | ä»€éº¼æ™‚å€™ç™¼ç¾æ–°ç¯€é»ï¼Ÿ     | ç•¶å‰ç¯€é»æœ‰ left/right child æ™‚ |
| ç¶­åº¦ 3 | ä»€éº¼æ™‚å€™è™•ç†ä¸‹ä¸€å€‹ç¯€é»ï¼Ÿ | æ¯æ¬¡è¿´åœˆå–å‡ºéšŠé¦–               |
| ç¶­åº¦ 4 | ä»€éº¼æ™‚å€™çµæŸï¼Ÿ           | Queue ç‚ºç©ºï¼ˆæ‰€æœ‰å±¤éƒ½è™•ç†å®Œï¼‰   |

**å¾æ˜ å°„åˆ°å¯¦ä½œçš„é—œéµæ­¥é©Ÿ**ï¼š

```javascript
function levelOrder(root) {
  if (!root) return [];

  const result = [];
  const queue = [root]; // ç¶­åº¦ 1ï¼šæ”¾ TreeNode

  while (queue.length > 0) {
    // ç¶­åº¦ 4ï¼šQueue ç©ºæ™‚çµæŸ
    const levelSize = queue.length;
    const currentLevel = [];

    for (let i = 0; i < levelSize; i++) {
      const node = queue.shift(); // ç¶­åº¦ 3ï¼šå–å‡ºè™•ç†
      currentLevel.push(node.val);

      if (node.left) queue.push(node.left); // ç¶­åº¦ 2ï¼šç™¼ç¾æ–°ç¯€é»
      if (node.right) queue.push(node.right);
    }

    result.push(currentLevel);
  }

  return result;
}
```

**é¡Œç›® B**ï¼šNumber of Islandsï¼ˆ200ï¼‰- BFS è§£æ³•

| ç¶­åº¦   | å…·é«”å•é¡Œ                 | æŠ½è±¡æ˜ å°„                   |
| ------ | ------------------------ | -------------------------- |
| ç¶­åº¦ 1 | éœ€è¦æ¢ç´¢çš„æ˜¯ä»€éº¼ï¼Ÿ       | åº§æ¨™ `[row, col]`          |
| ç¶­åº¦ 2 | ä»€éº¼æ™‚å€™ç™¼ç¾æ–°åº§æ¨™ï¼Ÿ     | å››å€‹æ–¹å‘æœ‰æœªè¨ªå•çš„ '1'     |
| ç¶­åº¦ 3 | ä»€éº¼æ™‚å€™è™•ç†ä¸‹ä¸€å€‹åº§æ¨™ï¼Ÿ | æ¯æ¬¡è¿´åœˆå–å‡ºéšŠé¦–           |
| ç¶­åº¦ 4 | ä»€éº¼æ™‚å€™çµæŸï¼Ÿ           | ç•¶å‰å³¶å¶¼çš„æ‰€æœ‰æ ¼å­éƒ½æ¨™è¨˜å®Œ |

---

## ğŸ” è§¸ç™¼å™¨ï¼ˆæ¨¡å¼è­˜åˆ¥ï¼‰

### æ­£å‘è§¸ç™¼å™¨

çœ‹åˆ°ä»€éº¼ç‰¹å¾µæ‡‰è©²æƒ³åˆ° Queueï¼Ÿ

| å±¤ç´š         | ç‰¹å¾µ                                                       | ç‚ºä»€éº¼é€™å€‹ç‰¹å¾µæŒ‡å‘ Queue           |
| ------------ | ---------------------------------------------------------- | ---------------------------------- |
| **é—œéµå­—**   | "level by level"ã€"å±¤åº"ã€"å»£åº¦å„ªå…ˆ"ã€"æœ€çŸ­è·¯å¾‘ï¼ˆç„¡æ¬Šåœ–ï¼‰" | é€™äº›éƒ½éœ€è¦æŒ‰ã€Œè·é›¢é è¿‘ã€é †åºè™•ç†   |
| **çµæ§‹**     | æ¨¹/åœ–éœ€è¦æŒ‰å±¤è™•ç†ã€ç¶²æ ¼éœ€è¦æ“´æ•£æ¢ç´¢                        | åŒä¸€å±¤çš„ç¯€é»æ‡‰è©²å…ˆæ–¼ä¸‹ä¸€å±¤è™•ç†     |
| **ç›®æ¨™**     | æ‰¾æœ€çŸ­æ­¥æ•¸ã€æœ€å°‘æ“ä½œæ¬¡æ•¸ã€æœ€è¿‘è·é›¢                         | BFS çš„å¤©ç„¶ç‰¹æ€§ï¼šç¬¬ä¸€æ¬¡åˆ°é”å°±æ˜¯æœ€çŸ­ |
| **æ“ä½œæ¨¡å¼** | è™•ç†ç•¶å‰ â†’ ç”¢ç”Ÿå¤šå€‹å¾ŒçºŒå¾…è™•ç† â†’ æŒ‰é †åºè™•ç†å¾ŒçºŒ             | FIFO ä¿è­‰é †åºæ­£ç¢ºæ€§                |

**ä¸€å¥è©±è§¸ç™¼è¦å‰‡**ï¼š**ç•¶ä½ éœ€è¦ã€Œé€å±¤å±•é–‹ã€æˆ–ã€ŒæŒ‰åˆ°é”é †åºè™•ç†ã€æ™‚ï¼Œç”¨ Queue**

### åå‘è§¸ç™¼å™¨

ä»€éº¼æƒ…æ³ä¸‹ã€Œçœ‹èµ·ä¾†é©ç”¨ä½†å…¶å¯¦ä¸æ˜¯ã€ï¼Ÿ

| é™·é˜±æƒ…å¢ƒ                             | ç‚ºä»€éº¼ä¸é©ç”¨             | æ›´å¥½çš„é¸æ“‡              |
| ------------------------------------ | ------------------------ | ----------------------- |
| éœ€è¦æŒ‰ã€Œå„ªå…ˆç´šã€è€Œéã€Œåˆ°é”é †åºã€è™•ç† | é †åºç”±æ¬Šé‡æ±ºå®šï¼Œä¸æ˜¯æ™‚é–“ | Priority Queue / Heap   |
| å¸¶æ¬Šåœ–çš„æœ€çŸ­è·¯å¾‘                     | é‚Šæœ‰æ¬Šé‡ï¼Œå…ˆåˆ°ä¸ä»£è¡¨æœ€çŸ­ | Dijkstraï¼ˆç”¨ Min Heapï¼‰ |
| éœ€è¦ LIFOï¼ˆå¾Œé€²å…ˆå‡ºï¼‰è™•ç†            | é †åºç›¸å                 | Stack                   |
| éœ€è¦å¿«é€ŸæŸ¥æ‰¾ä¸­é–“å…ƒç´                  | Queue åªèƒ½å­˜å–å…©ç«¯       | Array / Hash Map        |
| æ·±åº¦å„ªå…ˆçš„éæ­·éœ€æ±‚                   | éœ€è¦å…ˆæ·±å…¥å†å›æº¯         | Stack / éè¿´            |

### èˆ‡é¡ä¼¼å·¥å…·çš„æ±ºç­–é»

```plaintext
[éœ€è¦æŒ‰é †åºè™•ç†å…ƒç´ çš„å•é¡Œ]
â”œâ”€â”€ å¾Œé€²å…ˆå‡º (LIFO) â†’ Stack
â”‚   â””â”€â”€ éè¿´æ¨¡æ“¬ã€æ‹¬è™Ÿé…å°ã€å›æº¯
â”œâ”€â”€ å…ˆé€²å…ˆå‡º (FIFO) â†’ Queue âœ“
â”‚   â””â”€â”€ BFSã€å±¤åºéæ­·ã€ä»»å‹™æ’ç¨‹
â”œâ”€â”€ æŒ‰å„ªå…ˆç´šè™•ç† â†’ Priority Queue / Heap
â”‚   â””â”€â”€ å¸¶æ¬Šæœ€çŸ­è·¯å¾‘ã€Top Kã€åˆä½µ K å€‹æœ‰åºåºåˆ—
â””â”€â”€ å…©ç«¯éƒ½è¦æ“ä½œ â†’ Deque
    â””â”€â”€ æ»‘å‹•çª—å£æœ€å¤§å€¼ã€é›™å‘ BFS
```

**BFS vs DFS çš„é¸æ“‡**ï¼š

```plaintext
[åœ–/æ¨¹çš„éæ­·å•é¡Œ]
â”œâ”€â”€ æ‰¾ã€Œæœ€çŸ­/æœ€å°‘ã€â†’ BFSï¼ˆç”¨ Queueï¼‰
â”‚   â””â”€â”€ æœ€çŸ­è·¯å¾‘ã€æœ€å°‘æ­¥æ•¸ã€æœ€å°‘è®Šæ›
â”œâ”€â”€ æ‰¾ã€Œæ‰€æœ‰å¯èƒ½ã€â†’ DFSï¼ˆç”¨ Stack/éè¿´ï¼‰
â”‚   â””â”€â”€ å…¨æ’åˆ—ã€çµ„åˆã€è·¯å¾‘æšèˆ‰
â”œâ”€â”€ æ‰¾ã€Œæ˜¯å¦å­˜åœ¨ã€â†’ å…©è€…çš†å¯ï¼ŒDFS é€šå¸¸æ›´ç°¡å–®
â””â”€â”€ ç©ºé–“é™åˆ¶åš´æ ¼ â†’ DFSï¼ˆStack æ·±åº¦ = è·¯å¾‘é•·ï¼ŒBFS Queue å¯¬åº¦ = å±¤å¤§å°ï¼‰
```

---

## âš ï¸ æ³¨æ„äº‹é …

### å¸¸è¦‹é™·é˜±

| é™·é˜±                 | éŒ¯èª¤å¯«æ³•               | æ­£ç¢ºå¯«æ³•                                     | ç‚ºä»€éº¼                   |
| -------------------- | ---------------------- | -------------------------------------------- | ------------------------ |
| ç”¨ shift() å°è‡´ O(n) | `queue.shift()` ç›´æ¥ç”¨ | ç”¨ Circular Array æˆ–ç¶­è­· front index         | shift() æœƒç§»å‹•æ‰€æœ‰å…ƒç´    |
| BFS å±¤æ•¸è¨ˆç®—éŒ¯èª¤     | ä¸è¨˜éŒ„ levelSize       | å…ˆå­˜ `levelSize = queue.length` å†è·‘å…§å±¤è¿´åœˆ | è¿´åœˆä¸­ queue.length æœƒè®Š |
| é‡è¤‡å…¥éšŠ             | å…¥éšŠå¾Œæ‰æ¨™è¨˜ visited   | **å…¥éšŠå‰**å°±æ¨™è¨˜ visited                     | åŒä¸€å€‹ç¯€é»å¯èƒ½è¢«å¤šæ¬¡ç™¼ç¾ |
| ç’°ç‹€é™£åˆ— index è¨ˆç®—  | `rear++`               | `(rear + 1) % capacity`                      | å¿…é ˆç’°ç¹å›èµ·é»           |

**é‡è¤‡å…¥éšŠçš„è©³ç´°èªªæ˜**ï¼š

```javascript
// âŒ éŒ¯èª¤ï¼šå…¥éšŠå¾Œæ¨™è¨˜
while (queue.length > 0) {
  const [r, c] = queue.shift();
  visited[r][c] = true; // å¤ªæ™šäº†ï¼å¯èƒ½å·²ç¶“è¢«åŠ å…¥å¤šæ¬¡
  // ...
}

// âœ… æ­£ç¢ºï¼šç™¼ç¾æ™‚ç«‹å³æ¨™è¨˜
if (isValid(nr, nc) && !visited[nr][nc]) {
  visited[nr][nc] = true; // æ¨™è¨˜åœ¨ push ä¹‹å‰
  queue.push([nr, nc]);
}
```

### å¸¸è¦‹è®Šé«”

| è®Šé«”                  | ä¿®æ”¹å…§å®¹               | é©ç”¨å ´æ™¯                 |
| --------------------- | ---------------------- | ------------------------ |
| **Circular Queue**    | å›ºå®šå®¹é‡ï¼Œç”¨ç’°ç‹€ index | ç·©è¡å€ã€ç”Ÿç”¢è€…æ¶ˆè²»è€…æ¨¡å‹ |
| **Dequeï¼ˆé›™ç«¯ä½‡åˆ—ï¼‰** | å…©ç«¯éƒ½å¯ä»¥ push/pop    | æ»‘å‹•çª—å£ã€å›æ–‡æª¢æŸ¥       |
| **Priority Queue**    | æŒ‰å„ªå…ˆç´šè€Œéé †åºå‡ºéšŠ   | Dijkstraã€ä»»å‹™æ’ç¨‹       |
| **Monotonic Queue**   | ç¶­æŒå–®èª¿æ€§çš„ Deque     | æ»‘å‹•çª—å£æœ€å¤§/æœ€å°å€¼      |
| **Blocking Queue**    | å¤šåŸ·è¡Œç·’å®‰å…¨ï¼Œæ»¿æ™‚ç­‰å¾… | ç”Ÿç”¢è€…æ¶ˆè²»è€…æ¨¡å‹         |

---

## ğŸ“ æ¨™æº–å¯¦ä½œæ¨¡æ¿

```javascript
/**
 * Circular Queue - æ¨™æº–å¯¦ä½œ
 * æ ¸å¿ƒæ€æƒ³ï¼šç”¨ç’°ç‹€é™£åˆ—å¯¦ç¾ O(1) çš„ enqueue/dequeueï¼Œ
 *          é€é % capacity è®“ç´¢å¼•è‡ªå‹•ç’°ç¹ï¼Œé¿å…å…ƒç´ ç§»å‹•ã€‚
 *
 * æ™‚é–“è¤‡é›œåº¦ï¼šæ‰€æœ‰æ“ä½œ O(1)
 * ç©ºé–“è¤‡é›œåº¦ï¼šO(capacity)
 */
class CircularQueue {
  #queue;
  #capacity;
  #front;
  #rear;

  constructor(capacity) {
    this.#queue = new Array(capacity);
    this.#capacity = capacity;
    this.#front = -1; // -1 è¡¨ç¤ºç©ºç‹€æ…‹
    this.#rear = -1;
  }

  /**
   * å°‡å…ƒç´ åŠ å…¥éšŠå°¾
   * @param {*} item - è¦åŠ å…¥çš„å…ƒç´ 
   * @return {boolean} - æ˜¯å¦æˆåŠŸåŠ å…¥ï¼ˆæ»¿æ™‚å›å‚³ falseï¼‰
   *
   * é—œéµï¼šç’°ç‹€éå¢ rearï¼Œç”¨ % capacity è™•ç†ç’°ç¹
   */
  enqueue(item) {
    // æ»¿äº†ç„¡æ³•åŠ å…¥
    if (this.isFull()) return false;

    if (this.isEmpty()) {
      // ç¬¬ä¸€å€‹å…ƒç´ ï¼šåˆå§‹åŒ–å…©æŒ‡æ¨™åˆ°ä½ç½® 0
      this.#front = this.#rear = 0;
    } else {
      // ç’°ç‹€éå¢ï¼šåˆ°é”å°¾ç«¯æ™‚ç¹å›èµ·é»
      this.#rear = (this.#rear + 1) % this.#capacity;
    }

    this.#queue[this.#rear] = item;
    return true;
  }

  /**
   * ç§»é™¤ä¸¦å›å‚³éšŠé¦–å…ƒç´ 
   * @return {*} - éšŠé¦–å…ƒç´ ï¼Œç©ºæ™‚å›å‚³ null
   *
   * é—œéµï¼šè™•ç†ã€Œæœ€å¾Œä¸€å€‹å…ƒç´ ã€çš„ç‰¹æ®Šæƒ…æ³ï¼Œè¦é‡ç½®ç‚ºç©ºç‹€æ…‹
   */
  dequeue() {
    if (this.isEmpty()) return null;

    const item = this.#queue[this.#front];

    if (this.#front === this.#rear) {
      // æœ€å¾Œä¸€å€‹å…ƒç´ ï¼šé‡ç½®ç‚ºç©ºç‹€æ…‹
      this.#front = this.#rear = -1;
    } else {
      // ç’°ç‹€éå¢ front
      this.#front = (this.#front + 1) % this.#capacity;
    }

    return item;
  }

  /**
   * æŸ¥çœ‹éšŠé¦–å…ƒç´ ä½†ä¸ç§»é™¤
   */
  peek() {
    return this.isEmpty() ? null : this.#queue[this.#front];
  }

  /**
   * æª¢æŸ¥æ˜¯å¦ç‚ºç©º
   * ç©ºçš„å®šç¾©ï¼šfront === -1ï¼ˆåˆå§‹ç‹€æ…‹æˆ– dequeue å®Œæœ€å¾Œä¸€å€‹ï¼‰
   */
  isEmpty() {
    return this.#front === -1;
  }

  /**
   * æª¢æŸ¥æ˜¯å¦å·²æ»¿
   * æ»¿çš„å®šç¾©ï¼šrear çš„ä¸‹ä¸€æ ¼å°±æ˜¯ frontï¼ˆç’°ç‹€æ€è€ƒï¼‰
   */
  isFull() {
    return this.#front === (this.#rear + 1) % this.#capacity;
  }

  /**
   * å›å‚³ç›®å‰å…ƒç´ æ•¸é‡
   */
  size() {
    if (this.isEmpty()) return 0;
    // ç’°ç‹€è¨ˆç®—ï¼šè™•ç† rear < front çš„æƒ…æ³
    return ((this.#rear - this.#front + this.#capacity) % this.#capacity) + 1;
  }
}
```

---

## ğŸ¯ å­¸ç¿’æª¢æŸ¥é»

å®Œæˆæœ¬ç« å¾Œï¼Œä½ æ‡‰è©²èƒ½å›ç­”ï¼š

1. **ç‚ºä»€éº¼ Array + shift() çš„ Queue æ•ˆèƒ½å·®ï¼Ÿå¦‚ä½•æ”¹å–„ï¼Ÿ**
2. **Circular Array çš„ã€Œæ»¿ã€å’Œã€Œç©ºã€å¦‚ä½•åˆ¤æ–·ï¼Ÿç‚ºä»€éº¼éœ€è¦ç‰¹æ®Šè™•ç†ï¼Ÿ**
3. **BFS ä¸­ç‚ºä»€éº¼è¦åœ¨ã€Œå…¥éšŠå‰ã€æ¨™è¨˜ visitedï¼Œè€Œä¸æ˜¯ã€Œå‡ºéšŠå¾Œã€ï¼Ÿ**
4. **çœ‹åˆ°ä»€éº¼é¡å‹çš„å•é¡Œæ‡‰è©²æƒ³åˆ°ç”¨ Queueï¼Ÿä»€éº¼æ™‚å€™ä¸è©²ç”¨ï¼Ÿ**

---

éœ€è¦æˆ‘é‡å°ä»»ä½•éƒ¨åˆ†æ·±å…¥è§£é‡‹ï¼Œæˆ–è€…é€²è¡Œä¸€äº›å¯¦æˆ°é¡Œç›®ç·´ç¿’å—ï¼Ÿ
